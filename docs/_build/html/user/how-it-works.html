

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>How Turbinia Works &mdash; Turbinia  documentation</title>
  

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />

  
  
  
  

  
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/language_data.js"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Using Docker for Job execution" href="using-docker.html" />
    <link rel="prev" title="Turbinia Local and Manual Installation Instructions" href="install-manual.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html" class="icon icon-home" alt="Documentation Home"> Turbinia
          

          
            
            <img src="../_static/turbinia-logo.jpg" class="logo" alt="Logo"/>
          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="index.html">User documentation</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="install.html"><strong>Turbinia Quick Installation Instructions</strong></a></li>
<li class="toctree-l2"><a class="reference internal" href="install-manual.html">Turbinia Local and Manual Installation Instructions</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">How Turbinia Works</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#general">General</a></li>
<li class="toctree-l3"><a class="reference internal" href="#architecture">Architecture</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#cloud-architecture">Cloud Architecture</a></li>
<li class="toctree-l4"><a class="reference internal" href="#local-architecture">Local Architecture</a></li>
<li class="toctree-l4"><a class="reference internal" href="#hybrid-architecture">Hybrid Architecture</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#tasks">Tasks</a></li>
<li class="toctree-l3"><a class="reference internal" href="#jobs">Jobs</a></li>
<li class="toctree-l3"><a class="reference internal" href="#workers">Workers</a></li>
<li class="toctree-l3"><a class="reference internal" href="#evidence">Evidence</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#new-evidence">New Evidence</a></li>
<li class="toctree-l4"><a class="reference internal" href="#evidence-processors">Evidence Processors</a></li>
<li class="toctree-l4"><a class="reference internal" href="#copyable-evidence">Copyable Evidence</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#task-manager">Task Manager</a></li>
<li class="toctree-l3"><a class="reference internal" href="#task-manager-flow">Task Manager Flow</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="using-docker.html">Using Docker for Job execution</a></li>
<li class="toctree-l2"><a class="reference internal" href="operational-details.html">Operational Details</a></li>
<li class="toctree-l2"><a class="reference internal" href="debugging.html">Debugging</a></li>
<li class="toctree-l2"><a class="reference internal" href="faq.html">FAQ</a></li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../developer/index.html">Developer documentation</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Turbinia</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
        
          <li><a href="index.html">User documentation</a> &raquo;</li>
        
      <li>How Turbinia Works</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../_sources/user/how-it-works.md.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="how-turbinia-works">
<h1>How Turbinia Works<a class="headerlink" href="#how-turbinia-works" title="Permalink to this headline">¶</a></h1>
<div class="section" id="general">
<h2>General<a class="headerlink" href="#general" title="Permalink to this headline">¶</a></h2>
<p>This page contains some of the details on the internals of how Turbinia works.</p>
</div>
<div class="section" id="architecture">
<h2>Architecture<a class="headerlink" href="#architecture" title="Permalink to this headline">¶</a></h2>
<p>Turbinia can run its components completely in the Cloud, on local machines, or
as a hybrid of both.  When running in hybrid mode, Turbinia uses Cloud services,
but the workers and the Turbinia server run locally.  Running locally or in
hybrid mode requires shared storage to be accessible by all Workers.</p>
<div class="section" id="cloud-architecture">
<h3>Cloud Architecture<a class="headerlink" href="#cloud-architecture" title="Permalink to this headline">¶</a></h3>
<p><img alt="turbinia-architecture-cloud" src="../_images/turbinia-architecture-cloud.jpg" /></p>
</div>
<div class="section" id="local-architecture">
<h3>Local Architecture<a class="headerlink" href="#local-architecture" title="Permalink to this headline">¶</a></h3>
<p><img alt="turbinia-architecture-local.jpg" src="../_images/turbinia-architecture-local.jpg" /></p>
</div>
<div class="section" id="hybrid-architecture">
<h3>Hybrid Architecture<a class="headerlink" href="#hybrid-architecture" title="Permalink to this headline">¶</a></h3>
<p><img alt="turbinia-architecture-hybrid" src="../_images/turbinia-architecture-hybrid.jpg" /></p>
</div>
</div>
<div class="section" id="tasks">
<h2>Tasks<a class="headerlink" href="#tasks" title="Permalink to this headline">¶</a></h2>
<p>A Task is the smallest discrete unit of schedulable work. Tasks are scheduled
and executed on remote Workers. A Task can generate more Evidence that is
returned back to the Turbinia server for possible further processing.</p>
</div>
<div class="section" id="jobs">
<h2>Jobs<a class="headerlink" href="#jobs" title="Permalink to this headline">¶</a></h2>
<p>A Job is a larger logical unit of work that creates one or more Tasks to process
that work. A Job can either create a single Task, or it can break up that work and
create multiple Tasks. Sometimes these terms are used interchangeably (though we
mostly talk about things in terms of Tasks) because in most cases a Job will
just create a single Task.</p>
</div>
<div class="section" id="workers">
<h2>Workers<a class="headerlink" href="#workers" title="Permalink to this headline">¶</a></h2>
<p>Workers are independent processes that run either in Cloud GCE instances or on
local machines. They run continuously and wait for new Tasks to be scheduled.
When a new Task is scheduled, a pseudo-random worker will pick up the Task and
execute it. After the Task is complete (successfully or not), the Worker will
return the status, any error logs and results.</p>
</div>
<div class="section" id="evidence">
<h2>Evidence<a class="headerlink" href="#evidence" title="Permalink to this headline">¶</a></h2>
<p>Evidence can be anything that Turbinia can process. Examples include disk
images, cloud disks, Plaso files, strings files, etc. When you make a request to
Turbinia only the metadata for the evidence is passed into the request, but it
contains pointers to where the data is.</p>
<div class="section" id="new-evidence">
<h3>New Evidence<a class="headerlink" href="#new-evidence" title="Permalink to this headline">¶</a></h3>
<p>If you want to create a new Evidence type, they are simple Python objects in
<a class="reference external" href="https://github.com/google/turbinia/blob/master/turbinia/evidence.py">evidence.py</a>.
You can use object inheritance (e.g. an GoogleCloudDisk is a subclass of a
RawDisk) if you have multiple related Evidence types.</p>
</div>
<div class="section" id="evidence-processors">
<h3>Evidence Processors<a class="headerlink" href="#evidence-processors" title="Permalink to this headline">¶</a></h3>
<p>Each Evidence object can have a pre- and post-processor that prepares Evidence
prior to Task execution and cleans up afterwards.  Evidence pre-processors run
on the Worker node just prior to Task execution, and post-processors run after
the task execution is complete. Processors can be used to do things like attach
a Cloud Persistent Disk or mount a local disk. Because of the inheritance that
comes from how Evidence objects are defined in code, these processors can be
stacked together to run multiple Processors. An example of this is the
<code class="docutils literal notranslate"><span class="pre">GoogleCloudDiskRawEmbedded</span></code> Evidence type which is a <code class="docutils literal notranslate"><span class="pre">GoogleCloudDisk</span></code> that
contains a <code class="docutils literal notranslate"><span class="pre">RawDisk</span></code> image file. For this Evidence type, the Processor for the
<code class="docutils literal notranslate"><span class="pre">GoogleCloudDisk</span></code> runs first to attach the disk to the worker, and then the
Processor for the <code class="docutils literal notranslate"><span class="pre">RawDisk</span></code> runs to mount the “inner” raw disk image.</p>
</div>
<div class="section" id="copyable-evidence">
<h3>Copyable Evidence<a class="headerlink" href="#copyable-evidence" title="Permalink to this headline">¶</a></h3>
<p>Some types of Evidence can be marked as “copyable”. What that means is that this
kind of Evidence can be copied around as needed (either to make it available for
a new Task to use it, or to copy it off of a Worker after the Task has
completed). This is handled transparently by the Output Manager when it is
configured. An example of this is the <code class="docutils literal notranslate"><span class="pre">PlasoFile</span></code> Evidence type. Right now the
only storage that the Output Manager supports is Google Cloud Storage. If
Evidence is not copyable (like a RawDisk) and not a Cloud Evidence type (as
denoted by the <code class="docutils literal notranslate"><span class="pre">cloud_only</span></code> attribute), then you will need to have a shared disk
that is available to all Workers.</p>
</div>
</div>
<div class="section" id="task-manager">
<h2>Task Manager<a class="headerlink" href="#task-manager" title="Permalink to this headline">¶</a></h2>
<p>The Task Manager runs in the server and acts as a broker between the clients and
workers and handles management of Evidence, Jobs, Tasks and Workers.  It will keep
state on these objects while the processing request that generated them is still
ongoing.</p>
</div>
<div class="section" id="task-manager-flow">
<h2>Task Manager Flow<a class="headerlink" href="#task-manager-flow" title="Permalink to this headline">¶</a></h2>
<p>Jobs are configured to process specific Evidence types, and if the Task
Manager sees a new piece of Evidence (either from a new Turbinia request, or
because another Task generated a new piece of Evidence), and there is a Job
that is configured to run for that type of Evidence, then the Task Mananger will
create a new Job for it.  The Job then generates one or more Tasks which will
be immediately scheduled for execution.</p>
<p>Here is a breakdown of what happens during a typical processing request:</p>
<ul class="simple">
<li><p>The client sends a processing request to the server along with the Evidence to process</p></li>
<li><p>The server creates new Jobs for each Job type that can process that Evidence type</p></li>
<li><p>The Job generates one or more Tasks</p></li>
<li><p>The Task Manager schedules the Tasks to be executed</p></li>
<li><p>Workers from the pool pick up the Tasks for execution</p>
<ul>
<li><p>Tasks read the Evidence to process from shared storage or copy it from cloud storage</p></li>
<li><p>The Task runner pre-processes the Evidence</p></li>
<li><p>The Task performs the actual processing and potentially generates new Evidence</p></li>
<li><p>The Task runner post-processes the Evidence</p></li>
<li><p>Any newly generated Evidence data will be saved to storage by the Output Manager</p></li>
<li><p>Tasks return results and any new Evidence to the Server</p></li>
</ul>
</li>
<li><p>The Task Manager records the Task results into Datastore/Redis</p></li>
<li><p>The Task Manager picks up the newly created Evidence and restarts this processing loop</p></li>
</ul>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="using-docker.html" class="btn btn-neutral float-right" title="Using Docker for Job execution" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="install-manual.html" class="btn btn-neutral float-left" title="Turbinia Local and Manual Installation Instructions" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        
        &copy; Copyright 2020, Google Inc

    </p>
  </div>
    
    
    
    Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>